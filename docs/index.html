<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tabgha Education Center School Survey</title>

    <!-- Local preview CSS -->
    <link
      id="localStylesheet"
      rel="stylesheet"
      href="./style.css"
    />

    <!-- Hosted CSS fallback -->
    <link
      id="remoteStylesheet"
      rel="stylesheet"
      href="https://steph7n.github.io/tec-survey-assets/style.css"
    />

    <!-- Meta refresh fallback -->
    <meta
      http-equiv="refresh"
      content="3; url=https://script.google.com/macros/s/AKfycbzVNo2axMG4WFGj_46Vv_c5SSMg-Wbw1XhHqU5ci7F-IrsfST-bqJgaNLL57uU08WQy6g/exec?page=splash"
    />
  </head>
  <body>
    <!-- Top Bar -->
    <header class="app-bar">
      <img
        id="app-logo"
        alt="School Logo"
        class="app-bar__logo"
        src="./school-logo.png"
      />
      <div id="app-title" class="app-bar__title"></div>
    </header>

    <main class="page-container">
      <section class="page-content">
        <div class="card card--centered splash-card">
          <h1 class="card-title">Redirection in progress…</h1>
          <p class="text-hint">
            We’re taking you to the survey hub. If nothing happens, use the button below.
          </p>
          <a
            id="redirect-link"
            class="btn btn--primary btn--block"
            href="https://script.google.com/macros/s/AKfycbzVNo2axMG4WFGj_46Vv_c5SSMg-Wbw1XhHqU5ci7F-IrsfST-bqJgaNLL57uU08WQy6g/exec?page=splash"
          >
            Go to survey hub
          </a>
        </div>
      </section>
    </main>

    <script>
      (function () {
        var redirectUrl =
          "https://script.google.com/macros/s/AKfycbzVNo2axMG4WFGj_46Vv_c5SSMg-Wbw1XhHqU5ci7F-IrsfST-bqJgaNLL57uU08WQy6g/exec?page=splash";

        var host = window.location.hostname;
        var isLocal =
          host === "localhost" ||
          host === "127.0.0.1" ||
          host.endsWith(".github.io");

        var localCss = document.getElementById("localStylesheet");
        var remoteCss = document.getElementById("remoteStylesheet");
        if (localCss && remoteCss) {
          if (isLocal) {
            remoteCss.disabled = true;
          } else {
            localCss.disabled = true;
          }
        }

        var logo = document.getElementById("app-logo");
        if (logo && !isLocal) {
          logo.src = "https://steph7n.github.io/tec-survey-assets/school-logo.png";
        }

        var titleEl = document.getElementById("app-title");
        var year = new Date().getFullYear();
        if (titleEl) {
          titleEl.textContent = "School Survey " + year;
        }

        // Keep the CTA link in sync with the redirect target
        var redirectLink = document.getElementById("redirect-link");
        if (redirectLink) {
          redirectLink.href = redirectUrl;
        }

        // Preferred redirect path
        window.setTimeout(function () {
          window.location.replace(redirectUrl);
        }, 500);
      })();
    </script>
  </body>
</html>
